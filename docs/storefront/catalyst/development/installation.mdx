import { Tabs } from 'nextra/components'
import { Steps } from 'nextra/components'
import { Callout } from 'nextra/components'
 
**Development**

# Manual installation

<Callout type="warning">
  Make sure you've satisfied all [prerequisites](/prerequisites) before
  continuing.
</Callout>

We recommend using the CLI to create a new Catalyst project. The CLI will guide you through the process of creating a new project and setting up your development environment. If you prefer to create a project manually, you can follow the manual installation instructions; there is no difference in the end result between the two methods.

<Tabs items={['CLI', 'Manual']}>
  <Tabs.Tab>
    <Steps>
      ### Run the Catalyst CLI

      ```shell copy
      pnpm create @bigcommerce/catalyst@latest
      ```

      ### Set up a GitHub fork

      [You can click here to create a fork](https://github.com/bigcommerce/catalyst/fork) or, navigate to [https://github.com/bigcommerce/catalyst](https://github.com/bigcommerce/catalyst) and click "Fork" at the top of the page.

      GitHub will prompt you to choose a name for your fork; for the purposes of this guide, we'll refer to name of the fork as `<YOUR_FORK_NAME>`. You should replace `<YOUR_FORK_NAME>` in all of the commands below with your actual fork name.

      Back in your terminal, add your fork as a remote to your local repository:

      ```shell copy
      git remote add origin git@github.com:<YOUR_GITHUB_USERNAME>/<YOUR_FORK_NAME>.git
      ```
    </Steps>

  </Tabs.Tab>
  <Tabs.Tab>
    <Steps>
      ### Fork and clone the Catalyst GitHub repository

      We'll begin by forking the Catalyst monorepo.

      [You can click here to create a fork](https://github.com/bigcommerce/catalyst/fork) or, navigate to [https://github.com/bigcommerce/catalyst](https://github.com/bigcommerce/catalyst) and click "Fork" at the top of the page.

      GitHub will prompt you to choose a name for your fork; for the purposes of this guide, we'll refer to name of the fork as `<YOUR_FORK_NAME>`. You should replace `<YOUR_FORK_NAME>` in all of the commands below with your actual fork name.

      Back in your terminal, clone your fork:

      ```shell copy
      git clone git@github.com:<YOUR_GITHUB_USERNAME>/<YOUR_FORK_NAME>.git
      ```

      Now, change directories into the cloned fork:

      ```shell copy
      cd <YOUR_FORK_NAME>
      ```

      <Callout type="info" emoji="ℹ️">
        Unless otherwise specified, all of the commands that you run in your terminal from this point on should be run from the root of the monorepo repository you just cloned.
      </Callout>

      ### Add a remote pointing to the upstream Catalyst repository

      After forking the Catalyst repository, you'll want to set up a connection to the original Catalyst repository so you can easily pull in updates and stay up-to-date with the latest changes. This involves adding the original Catalyst repository as a remote, often named `upstream`.

      This will allow you to fetch changes from the main Catalyst project and merge them into your fork as needed.

      ```shell copy
      git remote add upstream git@github.com:bigcommerce/catalyst.git
      ```

      To confirm, run the following command in your terminal:

      ```shell copy
      git remote -v
      ```

      You should see output similar to:

      ```shell
      origin          git@github.com:<YOUR_GITHUB_USERNAME>/<YOUR_FORK_NAME>.git (fetch)
      origin          git@github.com:<YOUR_GITHUB_USERNAME>/<YOUR_FORK_NAME>.git (push)
      upstream        git@github.com:bigcommerce/catalyst.git (fetch)
      upstream        git@github.com:bigcommerce/catalyst.git (push)
      ```

      ### Enable Corepack

      Enable Corepack so that you can use `pnpm` as your Node.js package manager with Catalyst. When working in the monorepo, you must use `pnpm`, **you cannot use `npm` or `yarn`**.

      ```shell copy
      corepack enable pnpm
      ```

      You can verify that the installation worked by running:

      ```shell copy
      pnpm --version
      ```

      <Callout type="warning" emoji="💡">
        You might see a confirmation prompt similar to `! Corepack is about to download https://registry.npmjs.org/pnpm/-/pnpm-X.X.X.tgz` and `? Do you want to continue? [Y/n]`. You should type `Y` to continue.
      </Callout>

      If you see a version number printed to your console, you have successfully completed this step.

      ### Install Catalyst dependencies

      From the root of the monorepo, run the command below to install dependencies.

      ```shell copy
      pnpm install
      ```

      ### Set up environment variables

      ```shell copy
      pnpm create @bigcommerce/catalyst@latest init
      ```

      The CLI command above will prompt you to log into one of your BigCommerce stores, then create a new/use an existing Catalyst storefront Channel in your Control Panel’s Channel Manager section. It will then create an `.env.local` file with the required environment variables to run the Catalyst monorepository.

      ### (Optional) Copy VSCode settings

      If you use VS Code, use the following command to configure VSCode with the project-specific settings the Catalyst team has created:

      ```shell copy
      cp .vscode/settings.example.json .vscode/settings.json
      ```
    </Steps>

  </Tabs.Tab>
</Tabs>

### Run the development server

Finally, you can run the following command from the monorepo root to run the development server:

```shell copy
pnpm run dev
```

The following table lists localhost URLs with the default ports. When a port is unavailable, Catalyst uses the next available port. For example, if `3000` is in use, `core` will run on `3001`.

| Process             | URL with port           |
| :------------------ | :---------------------- |
| Catalyst storefront | `http://localhost:3000` |

## Project structure

The structure of the Catalyst repository you just created is a [monorepo](https://en.wikipedia.org/wiki/Monorepo) with multiple codebases, including but not limited to the following:

- [The core Next.js reference storefront application, in `/core`](https://github.com/bigcommerce/catalyst/tree/main/core)
- [Packages published to NPM, in `/packages`](https://github.com/bigcommerce/catalyst/tree/main/packages)

It's important to note that we use several tools throughout the Catalyst monorepo, such as [Turborepo](https://turbo.build/repo/docs) and [pnpm Workspaces](https://pnpm.io/workspaces); you'll notice references to these tools as you spend more time in the repository, but most developers likely won't need to change any files, code, or configuration related to these tools in their normal Catalyst workflows.
