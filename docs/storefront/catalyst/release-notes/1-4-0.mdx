# Catalyst version 1.4.0 Release Notes

We are excited to announce the release of Catalyst v1.4.0, which brings a few additional improvements  as well as new features including:

* [Product reviews](#product-reviews)  
* Newsletter subscriptions  
* Open telemetry  
* Backorders 

## Product Reviews

Catalyst now supports end-to-end product reviews on the storefront, integrated with the Storefront GraphQL API. This release enables:

* New Storefront GraphQL setting for enabling reviews (`site.settings.reviews.enabled)`  
* New Storefront GraphQL setting for displaying product ratings (`site.settings.display.showProductRating)`  
* New Storefront GraphQL setting for only accepting reviews from customers that have purchased the product (`site.settings.display.onlyAcceptPreviousCustomerReviews)`  
* Native review submission UI on the product detail page (PDP)

Here is an example GraphQL query for the settings related to reviews..

```graphql
query SiteReviewSettings {
  site {
    settings {
      reviews {
        enabled
        onlyAcceptPreviousCustomerReviews
      }
      display {
        showProductRating
      }
    }
  }
}
```

For more information on managing reviews in the Control Panel, refer to the [Managing Reviews documentation](https://support.bigcommerce.com/s/article/Managing-Reviews?language=en_US).

## Newsletter Subscriptions

This release introduces a fully functional, end-to-end newsletter subscription experience in Catalyst, integrated with the BigCommerce Storefront GraphQL API.

This release enables:

- Store-controlled visibility of newsletter signup UI
- Real customer subscription via GraphQL mutations
- Customer self-management of newsletter preferences from account settings

### Features

1. **Homepage newsletter signup is settings-driven**

   - The homepage `Subscribe` component now renders conditionally based on store configuration
   - Visibility is controlled by the Storefront GraphQL field: `site.settings.newsletter.showNewsletterSignup`
   - Uses the `Stream` / `Streamable` pattern for progressive loading
   - **Result:**
     - Stores with newsletter signup disabled will not render the section
     - Stores with signup enabled see the newsletter section as before, now controlled by settings

2. **Newsletter subscription is fully functional**

   - Replaced the mock newsletter subscription with a real Storefront GraphQL mutation: `SubscribeToNewsletterMutation`
   - Added comprehensive error handling:
     - Invalid email address
     - Already subscribed
     - Unexpected server errors
   - Improved error rendering in `InlineEmailForm` so server-side errors are properly displayed
   - Added E2E tests covering the subscription flow
   - **User-facing behavior:**
     - Success message on subscription
     - Clear error messages for common failure cases

3. **Account settings newsletter toggle**

   - Adds a "Marketing preferences" section to `/account/settings`
   - Introduces a toggle allowing customers to:
     - Subscribe to newsletters
     - Unsubscribe from newsletters
   - Uses a new server action: `updateNewsletterSubscription`
   - UI is shown only when newsletter signup is enabled at the store level
   - **Key characteristics:**
     - Toggle state reflects `customer.isSubscribedToNewsletter`
     - Submitting updates calls Storefront GraphQL to subscribe or unsubscribe
     - Includes E2E tests and translations

### Storefront GraphQL settings

This feature relies on Storefront GraphQL for both configuration and customer subscription state.

#### Fields added

**`site.settings.newsletter.showNewsletterSignup`**

- **Type:** `Boolean`
- **Purpose:** Controls whether newsletter subscription UI is displayed in the storefront
- **Used by:**
  - Homepage newsletter signup section
  - Account settings "Marketing preferences" section

**`customer.isSubscribedToNewsletter`**

- **Type:** `Boolean`
- **Purpose:** Indicates whether the authenticated customer is currently subscribed
- **Used by:**
  - Account settings toggle initial state
  - Determining subscribe vs unsubscribe behavior

#### GraphQL query example

```gql
query NewsletterSettingsAndCustomerStatus {
	site {
		settings {
			newsletter {
				showNewsletterSignup
			}
		}
	}
	customer {
		isSubscribedToNewsletter
	}
}
```

<Callout type='info'>
	The `customer` field requires an authenticated shopper context. For homepage
	gating only, querying `site.settings.newsletter.showNewsletterSignup` is
	sufficient.
</Callout>

### Storefront behavior

#### Homepage newsletter signup section

- The newsletter signup section no longer renders unconditionally
- Rendering is controlled by `showNewsletterSignup`
- **UX impact:**
  - No visual placeholder or empty state when disabled
  - When enabled, the section loads progressively and behaves as expected

#### Newsletter signup subscription flow

- Email submissions call BigCommerce Storefront GraphQL
- Errors returned from the API are surfaced directly in the UI
- **User-visible outcomes:**
  - Success confirmation on subscription
  - Friendly error messages for:
    - Invalid email
    - Already subscribed
    - General failures

#### Account settings: Marketing preferences

- Customers can manage newsletter preferences directly from `/account/settings`
- Toggle reflects real subscription state
- Submitting changes updates BigCommerce via GraphQL
- **Display rules:**
  - Section only appears when `showNewsletterSignup` is enabled
- **UX impact:**
  - Customers can opt in or out without re-entering email
  - Aligns newsletter management with other account preferences

### Limitations

This release does not include support for the following newsletter-related features:

**Support for Require Consent**

The Require Consent toggle in the store's Miscellaneous settings, which overrides the Newsletter Checkbox when enabled and allows customers to opt in to receive abandoned cart emails and other marketing emails, is not supported in this release.

**Support for Newsletter Summary**

The [Show Newsletter Summary](https://support.bigcommerce.com/s/article/Collecting-Newsletter-Subscriptions?language=en_US#newsletter-settings) field is not supported.

## Migration Guide

## Release Tags

We have published new tags for the Core and Makeswift versions of Catalyst. Target these tags to pull the latest code:

- [**@bigcommerce/catalyst-core@1.4.0**](https://github.com/bigcommerce/catalyst/releases/tag/%40bigcommerce%2Fcatalyst-core%401.4.0)
- [**@bigcommerce/catalyst-makeswift@1.4.0**](https://github.com/bigcommerce/catalyst/releases/tag/%40bigcommerce%2Fcatalyst-makeswift%401.4.0)

And as always, you can pull the latest stable release with these tags:

- [**@bigcommerce/catalyst-core@latest**](https://github.com/bigcommerce/catalyst/releases/tag/%40bigcommerce%2Fcatalyst-core%40latest)
- [**@bigcommerce/catalyst-makeswift@latest**](https://github.com/bigcommerce/catalyst/releases/tag/%40bigcommerce%2Fcatalyst-makeswift%40latest)
